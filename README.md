# 玉桂狗桌宠 (Cinnamoroll Desk Pet)

一个用C语言编写的可爱玉桂狗桌宠程序，能够实时监测你的打字速度并根据速度变化表情。

## 功能特性

1. **打字速度监测**：实时记录打字数量，每1秒计算一次打字速度（字符/秒）
2. **动态表情变化**：
   - 快速打字（≥9 char/s）：红温表情，严肃状态
   - 正常速度（4-8 char/s）：一般表情，平静状态
   - 慢速打字（≤3 char/s）：开心表情，可爱状态
3. **实时信息显示**：显示总字符数和实时打字速度
4. **窗口大小调整**：右键菜单支持Small/Medium/Large三种尺寸选择
5. **图像自适应缩放**：窗口大小变化时，玉桂狗图像自动按比例缩放并居中显示
6. **鼠标交互**：可以通过鼠标拖动桌宠到任意位置
7. **桌面运行**：直接在Windows桌面运行，无需浏览器

## 项目结构

```
desk/
├── src/
│   └── main.c          # 主程序文件
├── res/
│   ├── cinna_1.bmp     # 表情图片1
│   ├── cinna_2.bmp     # 表情图片2
│   ├── cinna_3.bmp     # 表情图片3
│   ├── cinna_4.bmp     # 表情图片4
│   ├── cinna_5.bmp     # 表情图片5
│   ├── cinna_6.bmp     # 表情图片6
│   ├── cinna_7.bmp     # 表情图片7
│   ├── cinna_8.bmp     # 表情图片8
│   └── cinna_9.bmp     # 表情图片9
├── bin/
│   └── cinnamoroll_pet.exe  # 桌宠可执行文件
├── Makefile            # 编译脚本
└── README.md           # 项目说明
```

## 编译和运行

### 方法一：使用Makefile（推荐）

1. 确保安装了MinGW或其他C语言编译器
2. 在项目根目录执行以下命令：
   ```bash
   make all
   ```
3. 运行桌宠程序：
   ```bash
   ./bin/cinnamoroll_pet.exe
   ```

### 方法二：手动编译

1. 在项目根目录执行以下命令：
   ```bash
   gcc -o bin/cinnamoroll_pet.exe src/main.c -luser32 -lgdi32 -lMsimg32
   ```

2. 运行桌宠程序：
   ```bash
   ./bin/cinnamoroll_pet.exe
   ```

## 使用说明

1. 启动程序后，玉桂狗桌宠会显示在桌面上
2. 可以通过鼠标左键拖动桌宠到任意位置
3. 右键点击桌宠，可以选择调整窗口大小（Small/Medium/Large）
4. 开始打字后，桌宠会根据你的打字速度自动改变表情
5. 程序会实时显示总字符数和当前打字速度
6. 按ESC键可以关闭桌宠程序

## 技术实现

- 使用Win32 API创建桌面窗口程序
- 实现全局键盘钩子监测所有软件的打字输入
- 使用AlphaBlend实现半透明效果和图像绘制
- 使用StretchBlt实现图像自适应缩放
- 基于打字速度的表情变化算法
- 支持窗口大小调整和图像自适应

## 自定义图片

如果想使用自己的玉桂狗图片，可以替换`res`目录下的cinna_*.bmp文件（共9个）。

图片尺寸建议为200x200像素，程序会自动处理图片的缩放和显示。

## 注意事项

1. 程序需要在Windows系统上运行
2. 确保编译器支持Win32 API和Msimg32库
3. 如果图片加载失败，请检查图片路径是否正确
4. 按ESC键可以快速退出程序
5. 重新启动程序前，请确保已完全退出之前的实例

## 许可证

本项目采用MIT许可证，可自由使用和修改。
